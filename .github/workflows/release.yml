name: Release

on:
  pull_request:
    types:
      - synchronize
      - opened
      - reopened
      - edited
      - labeled
      - unlabeled
  push:
    branches:
      - "version/*"
      - "release/*"
      - "testing/*"

permissions:
  contents: write
  statuses: write

jobs:
  release:
    uses: Thodor12/operapublicacreator/.github/workflows/gradle.publish.yaml@fix/changelog-merging
    with:
      java: 21
      curse_release_type: ${{ contains(github.ref, 'release') && 'release' || 'beta' }}
      gradle_tasks: assemble
    secrets: inherit
